<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>BitWave â€” Login</title>
<style>
  body{font-family:Arial,system-ui;background:#f0f4ff;padding:20px}
  .card{max-width:420px;margin:40px auto;padding:20px;border-radius:12px;background:#fff;box-shadow:0 6px 18px rgba(0,0,0,0.08)}
  input,button{width:100%;padding:12px;margin-top:8px;border-radius:8px;border:1px solid #ddd}
  button{background:#2563eb;color:#fff;border:none}
</style>
</head>
<body>
  <div class="card">
    <h2>Welcome to BitWave</h2>
    <p>Login with your mobile number. Use international format: +91xxxxxxxxxx</p>

    <label>Mobile</label>
    <input id="phone" placeholder="+91..." />

    <button id="sendOtp">Send OTP</button>

    <div id="verifyBox" style="display:none;">
      <label>Enter OTP</label>
      <input id="code" placeholder="123456" />
      <button id="verifyOtp">Verify & Login</button>
    </div>

    <div id="message" style="color:green;margin-top:10px"></div>
  </div>

<script>
const API = 'https://YOUR_BACKEND_URL/api'; // <- update this to your Render URL or localhost
document.getElementById('sendOtp').onclick = async () => {
  const phone = document.getElementById('phone').value.trim();
  if(!phone){ alert('enter phone'); return; }
  const res = await fetch(API + '/send-otp', {
    method:'POST', headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ phone })
  });
  const data = await res.json();
  if(res.ok) {
    document.getElementById('verifyBox').style.display = 'block';
    document.getElementById('message').innerText = 'OTP sent';
  } else {
    document.getElementById('message').innerText = data.error || JSON.stringify(data);
  }
};

document.getElementById('verifyOtp').onclick = async () => {
  const phone = document.getElementById('phone').value.trim();
  const code = document.getElementById('code').value.trim();
  if(!code){ alert('enter code'); return; }
  const res = await fetch(API + '/verify-otp', {
    method:'POST', headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ phone, code })
  });
  const data = await res.json();
  if(res.ok) {
    localStorage.setItem('bw_token', data.token);
    window.location = 'dashboard.html';
  } else {
    alert(data.error || 'Verification failed');
  }
};
</script>
</body>
</html>
